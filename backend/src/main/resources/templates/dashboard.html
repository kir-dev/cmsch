<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="hu">
<head th:replace="~{layout4 :: head(${context.siteName})}">
</head>
<body>
<div th:replace="~{layout4 :: mobile(null)}"></div>
<div th:replace="~{layout4 :: siteBegin(${userContext}, ${context})}"></div>

<div class="group">
    <div class="app">
        <div th:replace="~{layout4 :: menus(${userContext}, ${context})}">
        </div>

        <div class="content">
            <h1 th:class="${wide ? '' : 'narrow'}"><ins th:text="${title}">Dashboard</ins>
                <span class="material-symbols-outlined color-yellow star-button"
                      th:class="|material-symbols-outlined color-yellow star-button ${userContext.favoriteMenus.contains(title) ? 'favorite' : ''}|"
                      id="star-page"
                      th:data-star="${title}"
                      onclick="toggleStarred(this.getAttribute('data-star')); return false">star</span>
            </h1>
            <div th:class="|details ${wide ? '' : 'narrow'}|" th:text="${description}">Description</div>

            <object th:each="component,iter : ${components}" th:remove="tag">

                <object th:if="${component.type == 'DashboardCard'}" th:remove="tag">
                    <div th:class="|card ${component.wide ? '' : 'wide-false'}|" th:id="${component.id}">
                        <h4 th:text="${component.title}">Title</h4>
                        <span th:text="${component.description}" class="desc">A little description fits there.</span>

                        <p th:each="p : ${content}" th:text="${p}"></p>
                    </div>
                </object>

                <object th:if="${component.type == 'DashboardButtonGroup'}" th:remove="tag">
                    <div th:class="|card ${component.wide ? '' : 'wide-false'}|" th:id="${component.id}">
                        <h4 th:text="${component.title}">Title</h4>

                        <p th:each="p : ${content}" th:text="${p}"></p>

                        <div class="button-group">
                            <object th:each="button : ${buttons}" th:remove="tag">
                                <a href="#" th:href="|@{/admin/control}/${view}/${button.target}|" class="btn"
                                   th:class="|btn ${button.primary ? 'btn-primary' : 'btn-secondary'}|"
                                   th:target="${button.newPage ? '_blank' : ''}"
                                ><span class="material-symbols-outlined regular" th:text="${button.icon}">code</span> <ins th:text="${button.name}">Button name</ins></a>
                            </object>
                        </div>
                    </div>
                </object>

                <object th:if="${component.type == 'DashboardTableCard'}" th:remove="tag">
                    <div th:class="|card ${component.wide ? '' : 'wide-false'}|" th:id="${component.id}">
                        <h4 th:text="${component.title}">Title</h4>
                        <span th:text="${component.description}" class="desc">A little description fits there.</span>

                        <table class="dashboard-table" cellspacing="0" style="margin-top: 20px">
                            <tr>
                                <th th:each="th : ${component.header}" th:text="${th}"></th>
                            </tr>
                            <tr th:each="tr : ${component.content}">
                                <td th:each="col : ${tr}" th:text="${col}"></td>
                            </tr>
                        </table>

                        <div class="button-group" th:if="${component.exportable}">
                            <a href="#" th:href="|@{/admin/control}/${view}/export/${component.id}|" class="btn btn-primary" target="_blank"
                            ><span class="material-symbols-outlined regular">download</span> <ins>LETÖLTÉS (.csv)</ins></a>
                        </div>
                    </div>
                </object>

                <object th:if="${component.type == 'DashboardPermissionCard'}" th:remove="tag">
                    <div th:class="|card ${component.wide ? '' : 'wide-false'}|" th:if="${user.isAdmin()}" th:id="${component.id}">
                        <h4 th:text="${component.title}">Jogosultságok</h4>

                        <div class="options">
                            <div class="option">
                                <div><span class="material-symbols-outlined">local_police</span></div>
                                <div>
                                    <h5 th:text="${component.permission}">PERMISSION_NAME</h5>
                                    <span th:text="${component.description}">Ez a jog szükséges ennek az oldalnak az módosításához és olvasásához.</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </object>

                <object th:if="${component.type == 'DashboardFormCard'}" th:remove="tag">
                    <div th:class="|card ${component.wide ? '' : 'wide-false'}|" th:id="${component.id}">
                        <h4 th:text="${component.title}">Title</h4>
                        <span th:text="${component.description}" class="desc">A little description fits there.</span>

                        <form th:action="|@{/admin/control}/${view}/${component.action}|" th:method="${component.method}">

                            <object th:remove="tag" th:each="input,iter : ${component.content}">

                                <div th:if="${input.type.name() == 'TEXT'}" class="field-group">
                                    <label th:for="|input${iter.index}|"
                                           th:text="${input.label}">
                                    </label>
                                    <div style="clear: both"></div>
                                    <input type="text"
                                           th:name="${input.fieldName}"
                                           th:id="|input${iter.index}|"
                                           th:value="${input.defaultValue}"
                                           autocomplete="off"
                                           th:required="${input.required}"
                                    />
                                    <span class="note" th:text="${input.note}" th:if="${input.note != ''}"></span>
                                </div>

                                <div th:if="${input.type.name() == 'NUMBER'}" class="field-group">
                                    <label th:for="|input${iter.index}|"
                                           th:text="${input.label}">
                                    </label>
                                    <div style="clear: both"></div>
                                    <input type="text"
                                           th:name="${input.fieldName}"
                                           th:id="|input${iter.index}|"
                                           th:value="${input.defaultValue}"
                                           autocomplete="off"
                                           inputmode="numeric"
                                           th:required="${input.required}"
                                    />
                                    <span class="note" th:text="${input.note}" th:if="${input.note != ''}"></span>
                                </div>

                                <div th:if="${input.type.name() == 'SELECT'}" class="field-group" th:id="|_${iter.index}|">
                                    <label th:for="|input${iter.index}|"
                                           th:text="${input.label}">
                                    </label>
                                    <div style="clear: both"></div>
                                    <select th:id="|input${iter.index}|"
                                            th:name="${input.fieldName}">
                                        <option th:each="opt : ${input.values.split(', *')}"
                                                th:value="${opt}"
                                                th:text="${opt}"
                                                th:selected="${#strings.equals(input.defaultValue, opt)}"></option>
                                    </select>
                                    <span class="note" th:text="${input.note}" th:if="${input.note != ''}"></span>
                                </div>

                                <div th:if="${input.type.name() == 'LONG_TEXT'}" class="field-group">
                                    <label th:for="|input${iter.index}|"
                                           th:text="${input.label}">
                                    </label>
                                    <div style="clear: both"></div>
                                    <textarea
                                            th:name="${input.fieldName}"
                                            th:id="|input${iter.index}|"
                                            th:text="${input.defaultValue}"
                                            autocomplete="off"
                                            >
                                    </textarea>
                                    <span class="note" th:text="${input.note}" th:if="${input.note != ''}"></span>
                                </div>

                                <div th:if="${input.type.name() == 'CHECKBOX'}" class="field-group">
                                    <label th:for="|input${iter.index}|"
                                           th:text="${input.label}">
                                    </label>
                                    <div style="clear: both"></div>
                                    <label class="switch">
                                        <input type="checkbox"
                                               th:checked="${input.defaultValue == 'true'}"
                                               th:name="${input.fieldName}"
                                               th:id="|input${iter.index}|"
                                        />
                                        <span class="slider"></span>
                                    </label>
                                    <span class="note" th:text="${input.note}" th:if="${input.note != ''}"></span>
                                    <div style="clear: both"></div>
                                </div>

                            </object>

                            <div class="button-group">
                                <button type="submit" class="btn btn-primary">
                                    <span class="material-symbols-outlined" th:text="${component.buttonIcon}">check_circle</span>
                                    <ins th:text="${component.buttonCaption}">SUBMIT</ins>
                                </button>
                            </div>

                        </form>

                    </div>
                </object>
            </object>


        </div>
    </div>
</div>

</body>
</html>
